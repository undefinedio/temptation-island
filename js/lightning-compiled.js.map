{"version":3,"sources":["lightning.js"],"names":[],"mappings":";;;;;AAGA,IAAI,kBAAkB,SAAlB,eAAkB,CAAU,CAAV,EAAa,EAAb,EAAiB,EAAjB,EAAqB;;;;;AAKvC,SAAK,IAAL,GAAY,YAAY;AACpB,aAAK,IAAL,GADoB;KAAZ;;;;;AAL2B,QAYnC,QAAQ,IAAR,CAZmC;AAavC,SAAK,CAAL,GAAS,CAAT,CAbuC;AAcvC,SAAK,GAAL,GAAW,EAAE,UAAF,CAAa,IAAb,CAAX,CAduC;AAevC,SAAK,EAAL,GAAU,EAAV,CAfuC;AAgBvC,SAAK,EAAL,GAAU,EAAV,CAhBuC;AAiBvC,SAAK,EAAL,GAAU,CAAV,CAjBuC;AAkBvC,SAAK,EAAL,GAAU,CAAV,CAlBuC;;AAoBvC,SAAK,SAAL,GAAiB,EAAjB,CApBuC;AAqBvC,SAAK,gBAAL,GAAwB,CAAxB,CArBuC;AAsBvC,SAAK,cAAL,GAAsB,EAAtB;;;;;AAtBuC,QA2BvC,CAAK,IAAL,GAAY,UAAU,GAAV,EAAe,GAAf,EAAoB;AAC5B,eAAO,EAAC,EAAE,IAAC,CAAK,MAAL,MAAiB,MAAM,GAAN,GAAY,CAAZ,CAAjB,GAAmC,GAApC,CAAF,CADoB;KAApB,CA3B2B;AA8BvC,SAAK,OAAL,GAAe,UAAU,EAAV,EAAc,EAAd,EAAkB,EAAlB,EAAsB,EAAtB,EAA0B,EAA1B,EAA8B,EAA9B,EAAkC,EAAlC,EAAsC,EAAtC,EAA0C;AACrD,eAAO,EAAE,KAAK,EAAL,GAAU,EAAV,IAAgB,KAAK,EAAL,GAAU,EAAV,IAAgB,KAAK,EAAL,GAAU,EAAV,IAAgB,KAAK,EAAL,GAAU,EAAV,CAAlD,CAD8C;KAA1C;;;;;AA9BwB,QAqCvC,CAAK,OAAL,GAAe,UAAU,KAAV,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,QAAvB,EAAiC;AAC5C,YAAI,SAAS;AACT,eAAG,CAAH;AACA,eAAG,CAAH;AACA,oBAAQ,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,CAAR;AACA,oBAAQ,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,CAAR;AACA,kBAAM,CAAC;AACH,mBAAG,CAAH;AACA,mBAAG,CAAH;aAFE,CAAN;AAIA,uBAAW,KAAK,IAAL,CAAU,EAAV,EAAc,EAAd,CAAX;AACA,sBAAU,QAAV;AACA,sBAAU,KAAV;SAXA,CADwC;;AAe5C,cAAM,IAAN,CAAW,MAAX,EAf4C;KAAjC;;;;;AArCwB,QA0DvC,CAAK,OAAL,GAAe,UAAU,KAAV,EAAiB;AAC5B,YAAI,IAAI,MAAM,MAAN,CADoB;;AAG5B,eAAO,GAAP,EAAY;AACR,gBAAI,QAAQ,MAAM,CAAN,CAAR,CADI;;AAGR,kBAAM,IAAN,CAAW,IAAX,CAAgB;AACZ,mBAAG,MAAM,IAAN,CAAW,MAAM,IAAN,CAAW,MAAX,GAAoB,CAApB,CAAX,CAAkC,CAAlC,IAAuC,KAAK,IAAL,CAAU,CAAV,EAAa,MAAM,MAAN,CAAb,GAA8B,MAAM,MAAN,GAAe,CAAf,CAArE;AACH,mBAAG,MAAM,IAAN,CAAW,MAAM,IAAN,CAAW,MAAX,GAAoB,CAApB,CAAX,CAAkC,CAAlC,GAAuC,KAAK,IAAL,CAAU,CAAV,EAAa,MAAM,MAAN,CAApD;aAFP,EAHQ;;AAQR,gBAAI,MAAM,IAAN,CAAW,MAAX,GAAoB,MAAM,SAAN,EAAiB;AACrC,sBAAM,MAAN,CAAa,CAAb,EAAgB,CAAhB,EADqC;aAAzC;;AAIA,kBAAM,QAAN,GAAiB,IAAjB,CAZQ;SAAZ;KAHW;;;;;AA1DwB,QAgFvC,CAAK,OAAL,GAAe,UAAU,KAAV,EAAiB;AAC5B,YAAI,IAAI,MAAM,MAAN,CADoB;;AAG5B,eAAO,GAAP,EAAY;AACR,gBAAI,QAAQ,MAAM,CAAN,CAAR,CADI;;AAGR,iBAAK,GAAL,CAAS,WAAT,GAAuB,yBAAyB,KAAK,IAAL,CAAU,EAAV,EAAc,GAAd,IAAqB,GAArB,GAA2B,GAApD,CAHf;AAIR,iBAAK,GAAL,CAAS,SAAT,GAAqB,CAArB,CAJQ;;AAMR,gBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,KAAoB,CAApB,EAAuB;AACvB,qBAAK,GAAL,CAAS,SAAT,GAAqB,CAArB,CADuB;aAA3B;;AAIA,gBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,KAAoB,CAApB,EAAuB;AACvB,qBAAK,GAAL,CAAS,SAAT,GAAqB,CAArB,CADuB;aAA3B;;AAIA,gBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,KAAoB,CAApB,EAAuB;AACvB,qBAAK,GAAL,CAAS,SAAT,GAAqB,CAArB,CADuB;aAA3B;;AAIA,gBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,GAAb,KAAqB,CAArB,EAAwB;AACxB,qBAAK,GAAL,CAAS,SAAT,GAAqB,CAArB,CADwB;aAA5B;;AAIA,gBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,GAAb,KAAqB,CAArB,EAAwB;AACxB,qBAAK,GAAL,CAAS,SAAT,GAAqB,CAArB,CADwB;aAA5B;;AAIA,iBAAK,GAAL,CAAS,SAAT,GA1BQ;;AA4BR,gBAAI,YAAY,MAAM,IAAN,CAAW,MAAX,CA5BR;;AA8BR,iBAAK,GAAL,CAAS,MAAT,CAAgB,MAAM,CAAN,EAAS,MAAM,CAAN,CAAzB,CA9BQ;;AAgCR,iBAAK,IAAI,KAAK,CAAL,EAAQ,KAAK,SAAL,EAAgB,IAAjC,EAAuC;AACnC,qBAAK,GAAL,CAAS,MAAT,CAAgB,MAAM,IAAN,CAAW,EAAX,EAAe,CAAf,EAAkB,MAAM,IAAN,CAAW,EAAX,EAAe,CAAf,CAAlC,CADmC;;AAGnC,oBAAI,MAAM,QAAN,EAAgB;AAChB,wBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,GAAb,KAAqB,CAArB,EAAwB;AACxB,8BAAM,QAAN,GAAiB,KAAjB,CADwB;AAExB,6BAAK,OAAL,CAAa,KAAb,EAAoB,MAAM,IAAN,CAAW,EAAX,EAAe,CAAf,EAAkB,MAAM,IAAN,CAAW,EAAX,EAAe,CAAf,EAAkB,KAAxD,EAFwB;qBAA5B;iBADJ;aAHJ;;AAWA,gBAAI,CAAC,MAAM,QAAN,EAAgB;AACjB,qBAAK,GAAL,CAAS,SAAT,GAAqB,yBAAyB,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,IAAmB,GAAnB,GAAyB,GAAlD,CADJ;AAEjB,qBAAK,GAAL,CAAS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAK,EAAL,EAAS,KAAK,EAAL,CAAjC,CAFiB;aAArB;;AAKA,gBAAI,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,KAAoB,CAApB,EAAuB;AACvB,qBAAK,GAAL,CAAS,SAAT,GAAqB,yBAAyB,KAAK,IAAL,CAAU,CAAV,EAAa,CAAb,IAAkB,GAAlB,GAAwB,GAAjD,CADE;AAEvB,qBAAK,GAAL,CAAS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAK,EAAL,EAAS,KAAK,EAAL,CAAjC,CAFuB;aAA3B;;AAKA,iBAAK,GAAL,CAAS,MAAT,GArDQ;SAAZ;KAHW;;;;;AAhFwB,QA+IvC,CAAK,cAAL,GAAsB,UAAU,KAAV,EAAiB;AACnC,aAAK,gBAAL,GADmC;;AAGnC,YAAI,KAAK,gBAAL,IAAyB,KAAK,cAAL,EAAqB;AAC9C,gBAAI,OAAO,KAAK,IAAL,CAAU,GAAV,EAAe,KAAK,GAAL,CAAtB,CAD0C;AAE9C,gBAAI,OAAO,CAAP,CAF0C;;AAI9C,gBAAI,cAAc,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,CAAd,CAJ0C;;AAM9C,mBAAO,aAAP,EAAsB;AAClB,qBAAK,OAAL,CAAa,KAAb,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,IAAhC,EADkB;aAAtB;;AAIA,iBAAK,gBAAL,GAAwB,CAAxB,CAV8C;AAW9C,iBAAK,cAAL,GAAsB,KAAK,IAAL,CAAU,EAAV,EAAc,GAAd,CAAtB,CAX8C;SAAlD;KAHkB;;;;;AA/IiB,QAoKvC,CAAK,WAAL,GAAmB,YAAY;AAC3B,aAAK,GAAL,CAAS,wBAAT,GAAoC,iBAApC,CAD2B;AAE3B,aAAK,GAAL,CAAS,SAAT,GAAqB,gBAAgB,KAAK,IAAL,CAAU,CAAV,EAAa,EAAb,IAAmB,GAAnB,GAAyB,GAAzC,CAFM;AAG3B,aAAK,GAAL,CAAS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAK,EAAL,EAAS,KAAK,EAAL,CAAjC,CAH2B;AAI3B,aAAK,GAAL,CAAS,wBAAT,GAAoC,aAApC,CAJ2B;KAAZ;;;;;AApKoB,KA8KvC,CAAE,MAAF,EAAU,EAAV,CAAa,QAAb,EAAuB,YAAY;AAC/B,cAAM,EAAN,GAAW,MAAM,CAAN,CAAQ,KAAR,GAAgB,OAAO,UAAP,CADI;AAE/B,cAAM,EAAN,GAAW,MAAM,CAAN,CAAQ,MAAR,GAAiB,OAAO,WAAP,CAFG;KAAZ,CAAvB;;;;;AA9KuC,QAsLvC,CAAK,IAAL,GAAY,YAAY;AACpB,YAAI,OAAO,IAAP,CADgB;;AAGpB,YAAI,SAAS,SAAT,MAAS,GAAY;AACrB,kCAAsB,MAAtB,EAA8B,MAAM,CAAN,CAA9B,CADqB;AAErB,kBAAM,WAAN,GAFqB;AAGrB,kBAAM,OAAN,CAAc,KAAK,SAAL,CAAd,CAHqB;AAIrB,kBAAM,cAAN,CAAqB,KAAK,SAAL,CAArB,CAJqB;AAKrB,kBAAM,OAAN,CAAc,KAAK,SAAL,CAAd,CALqB;SAAZ,CAHO;AAUpB,iBAVoB;KAAZ,CAtL2B;CAArB;;;;;AAwMtB,IAAI,oBAAoB,SAApB,iBAAoB,GAAY;AAChC,QAAI,OAAO,SAAS,aAAT,CAAuB,QAAvB,CAAP,CAD4B;AAEhC,WAAO,CAAC,EAAE,KAAK,UAAL,IAAmB,KAAK,UAAL,CAAgB,IAAhB,CAAnB,CAAF,CAFwB;CAAZ;;;;;AAQxB,IAAI,WAAW,SAAX,QAAW,GAAY;AACvB,QAAI,WAAW,CAAX,CADmB;AAEvB,QAAI,UAAU,CAAC,IAAD,EAAO,KAAP,EAAc,QAAd,EAAwB,GAAxB,CAAV,CAFmB;;AAIvB,SAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,QAAQ,MAAR,IAAkB,CAAC,OAAO,qBAAP,EAA8B,EAAE,CAAF,EAAK;AACtE,eAAO,qBAAP,GAA+B,OAAO,QAAQ,CAAR,IAAa,uBAAb,CAAtC,CADsE;AAEtE,eAAO,oBAAP,GAA8B,OAAO,QAAQ,CAAR,IAAa,sBAAb,CAAP,IAA+C,OAAO,QAAQ,CAAR,IAAa,6BAAb,CAAtD,CAFwC;KAA1E;;AAKA,QAAI,CAAC,OAAO,qBAAP,EAA8B;AAC/B,eAAO,qBAAP,GAA+B,UAAU,QAAV,EAAoB,OAApB,EAA6B;AACxD,gBAAI,WAAW,IAAI,IAAJ,GAAW,OAAX,EAAX,CADoD;AAExD,gBAAI,aAAa,KAAK,GAAL,CAAS,CAAT,EAAY,MAAM,WAAW,QAAX,CAAN,CAAzB,CAFoD;AAGxD,gBAAI,KAAK,OAAO,UAAP,CAAkB,YAAY;AACnC,yBAAS,WAAW,UAAX,CAAT,CADmC;aAAZ,EAExB,UAFM,CAAL,CAHoD;AAMxD,uBAAW,WAAW,UAAX,CAN6C;AAOxD,mBAAO,EAAP,CAPwD;SAA7B,CADA;KAAnC;;AAYA,QAAI,CAAC,OAAO,oBAAP,EAA6B;AAC9B,eAAO,oBAAP,GAA8B,UAAU,EAAV,EAAc;AACxC,yBAAa,EAAb,EADwC;SAAd,CADA;KAAlC;CArBW;;;;;AA+Bf,EAAE,MAAF,EAAU,IAAV,CAAe,YAAY;AACvB,QAAI,iBAAJ,EAAuB;AACnB,YAAI,IAAI,SAAS,cAAT,CAAwB,QAAxB,CAAJ,CADe;AAEnB,YAAI,KAAK,EAAE,KAAF,GAAU,OAAO,UAAP,CAFA;AAGnB,YAAI,KAAK,EAAE,MAAF,GAAW,OAAO,WAAP,CAHD;AAInB,YAAI,KAAK,IAAI,eAAJ,CAAoB,CAApB,EAAuB,EAAvB,EAA2B,EAA3B,CAAL,CAJe;;AAMnB,mBANmB;AAOnB,WAAG,IAAH,GAPmB;KAAvB;CADW,CAAf","file":"lightning-compiled.js","sourcesContent":["/*=============================================================================*/\n/* Canvas Lightning v1\n /*=============================================================================*/\nvar canvasLightning = function (c, cw, ch) {\n\n    /*=============================================================================*/\n    /* Initialize\n     /*=============================================================================*/\n    this.init = function () {\n        this.loop();\n    };\n\n    /*=============================================================================*/\n    /* Variables\n     /*=============================================================================*/\n    var _this = this;\n    this.c = c;\n    this.ctx = c.getContext('2d');\n    this.cw = cw;\n    this.ch = ch;\n    this.mx = 0;\n    this.my = 0;\n\n    this.lightning = [];\n    this.lightTimeCurrent = 0;\n    this.lightTimeTotal = 50;\n\n    /*=============================================================================*/\n    /* Utility Functions\n     /*=============================================================================*/\n    this.rand = function (rMi, rMa) {\n        return ~~((Math.random() * (rMa - rMi + 1)) + rMi);\n    };\n    this.hitTest = function (x1, y1, w1, h1, x2, y2, w2, h2) {\n        return !(x1 + w1 < x2 || x2 + w2 < x1 || y1 + h1 < y2 || y2 + h2 < y1);\n    };\n\n    /*=============================================================================*/\n    /* Create Lightning\n     /*=============================================================================*/\n    this.createL = function (array, x, y, canSpawn) {\n        var object = {\n            x: x,\n            y: y,\n            xRange: this.rand(5, 30),\n            yRange: this.rand(5, 25),\n            path: [{\n                x: x,\n                y: y\n            }],\n            pathLimit: this.rand(10, 35),\n            canSpawn: canSpawn,\n            hasFired: false\n        };\n\n        array.push(object);\n    };\n\n    /*=============================================================================*/\n    /* Update Lightning\n     /*=============================================================================*/\n    this.updateL = function (array) {\n        var i = array.length;\n\n        while (i--) {\n            var light = array[i];\n\n            light.path.push({\n                x: light.path[light.path.length - 1].x + (this.rand(0, light.xRange) - (light.xRange / 2)),\n                y: light.path[light.path.length - 1].y + (this.rand(0, light.yRange))\n            });\n\n            if (light.path.length > light.pathLimit) {\n                array.splice(i, 1)\n            }\n\n            light.hasFired = true;\n        }\n    };\n\n    /*=============================================================================*/\n    /* Render Lightning\n     /*=============================================================================*/\n    this.renderL = function (array) {\n        var i = array.length;\n\n        while (i--) {\n            var light = array[i];\n\n            this.ctx.strokeStyle = 'hsla(0, 100%, 100%, ' + this.rand(10, 100) / 100 + ')';\n            this.ctx.lineWidth = 1;\n\n            if (this.rand(0, 30) == 0) {\n                this.ctx.lineWidth = 2;\n            }\n\n            if (this.rand(0, 60) == 0) {\n                this.ctx.lineWidth = 3;\n            }\n\n            if (this.rand(0, 90) == 0) {\n                this.ctx.lineWidth = 4;\n            }\n\n            if (this.rand(0, 120) == 0) {\n                this.ctx.lineWidth = 5;\n            }\n\n            if (this.rand(0, 150) == 0) {\n                this.ctx.lineWidth = 6;\n            }\n\n            this.ctx.beginPath();\n\n            var pathCount = light.path.length;\n\n            this.ctx.moveTo(light.x, light.y);\n\n            for (var pc = 0; pc < pathCount; pc++) {\n                this.ctx.lineTo(light.path[pc].x, light.path[pc].y);\n\n                if (light.canSpawn) {\n                    if (this.rand(0, 100) == 0) {\n                        light.canSpawn = false;\n                        this.createL(array, light.path[pc].x, light.path[pc].y, false);\n                    }\n                }\n            }\n\n            if (!light.hasFired) {\n                this.ctx.fillStyle = 'rgba(255, 255, 255, ' + this.rand(4, 12) / 100 + ')';\n                this.ctx.fillRect(0, 0, this.cw, this.ch);\n            }\n\n            if (this.rand(0, 30) == 0) {\n                this.ctx.fillStyle = 'rgba(255, 255, 255, ' + this.rand(1, 3) / 100 + ')';\n                this.ctx.fillRect(0, 0, this.cw, this.ch);\n            }\n\n            this.ctx.stroke();\n        }\n    };\n\n    /*=============================================================================*/\n    /* Lightning Timer\n     /*=============================================================================*/\n    this.lightningTimer = function (array) {\n        this.lightTimeCurrent++;\n\n        if (this.lightTimeCurrent >= this.lightTimeTotal) {\n            var newX = this.rand(100, cw - 100);\n            var newY = 0;\n\n            var createCount = this.rand(1, 10);\n\n            while (createCount--) {\n                this.createL(array, newX, newY, true);\n            }\n\n            this.lightTimeCurrent = 0;\n            this.lightTimeTotal = this.rand(30, 100);\n        }\n    };\n\n    /*=============================================================================*/\n    /* Clear Canvas\n     /*=============================================================================*/\n    this.clearCanvas = function () {\n        this.ctx.globalCompositeOperation = 'destination-out';\n        this.ctx.fillStyle = 'rgba(0,0,0,' + this.rand(1, 30) / 100 + ')';\n        this.ctx.fillRect(0, 0, this.cw, this.ch);\n        this.ctx.globalCompositeOperation = 'source-over';\n    };\n\n    /*=============================================================================*/\n    /* Resize on Canvas on Window Resize\n     /*=============================================================================*/\n    $(window).on('resize', function () {\n        _this.cw = _this.c.width = window.innerWidth;\n        _this.ch = _this.c.height = window.innerHeight;\n    });\n\n    /*=============================================================================*/\n    /* Animation Loop\n     /*=============================================================================*/\n    this.loop = function () {\n        var self = this;\n\n        var loopIt = function () {\n            requestAnimationFrame(loopIt, _this.c);\n            _this.clearCanvas();\n            _this.updateL(self.lightning);\n            _this.lightningTimer(self.lightning);\n            _this.renderL(self.lightning);\n        };\n        loopIt();\n    };\n\n};\n\n/*=============================================================================*/\n/* Check Canvas Support\n /*=============================================================================*/\nvar isCanvasSupported = function () {\n    var elem = document.createElement('canvas');\n    return !!(elem.getContext && elem.getContext('2d'));\n};\n\n/*=============================================================================*/\n/* Setup requestAnimationFrame\n /*=============================================================================*/\nvar setupRAF = function () {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function (callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function () {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function (id) {\n            clearTimeout(id);\n        };\n    }\n};\n\n/*=============================================================================*/\n/* Define Canvas and Initialize\n /*=============================================================================*/\n$(window).load(function () {\n    if (isCanvasSupported) {\n        var c = document.getElementById('canvas');\n        var cw = c.width = window.innerWidth;\n        var ch = c.height = window.innerHeight;\n        var cl = new canvasLightning(c, cw, ch);\n\n        setupRAF();\n        cl.init();\n    }\n});"]}